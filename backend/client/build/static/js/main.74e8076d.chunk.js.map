{"version":3,"sources":["GraphUI.js","hooks/useD3.js","AllNotes.js","NewNote.js","EditNote.js","ReactQuilComp.js","App.js","serviceWorker.js","index.js"],"names":["GraphUI","parentContext","ref","renderTreeFn","dependencies","React","useRef","useEffect","d3","current","useD3","svg","width","window","innerWidth","height","innerHeight","remove","g","attr","append","i","root","state","treeData","d","children","console","log","undefined","forEach","collapse","_children","x0","y0","flexLayout","flextree","update","source","nodes","descendants","links","slice","node","selectAll","data","id","nodeEnter","enter","style","text","name","timer","prevent","nodeUpdate","merge","on","setTimeout","toggleButton","context","select","empty","arc1","innerRadius","outerRadius","startAngle","endAngle","Math","PI","arc2","arc3","arc4","handleAddChild","handleAddSibling","handleEdit","handleDelete","clearTimeout","click","alert","addChild","variables","_id","stopPropagation","addSibling","location","href","deleteNote","transition","duration","event","arr","this","datum","x","y","nodeExit","exit","link","insert","o","diagonal","parent","s","marginRight","marginLeft","AllNotes","allNotes","titleMap","axios","post","JSON","stringify","then","res","note","title","setState","Object","keys","length","recurseTreeData","childId","push","content","get","notes","rootLink","updateTitleMap","populateTreeData","parse","init","element","deleteLinks","delete","entries","key","includes","index","indexOf","splice","saveLinks","props","history","catch","err","newChild","concat","newSibling","className","Component","NewNote","newNote","onSubmit","e","preventDefault","createNote","type","placeholder","value","onChange","setTitle","target","rows","setContent","withRouter","EditNote","match","params","editedNote","put","updateNote","notify","show","defaultValue","required","RichTextEditor","loadText","quillRef","setContents","reactQuillRef","theme","handleChange","bind","getEditor","delta","editor","getContents","modules","formats","el","onClick","toolbar","size","clipboard","matchVisual","App","role","aria-label","to","exact","path","component","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.74e8076d.chunk.js","sourcesContent":["import { useD3 } from './hooks/useD3';\nimport React from \"react\";\nimport * as d3 from 'd3';\nimport * as flextree from 'd3-flextree'\n\n\nfunction GraphUI({ parentContext }) {\n  const ref = useD3(\n    (svg) => {\n      var width = window.innerWidth,\n        height = window.innerHeight;\n\n      // Remove the old svg\n      d3.selectAll(\"g > *\").remove();\n\n      // append the svg object to the body of the page\n      const g = svg\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .append(\"g\")\n        .attr('transform', `translate(${width / 2},100)`)\n\n\n      const duration = 750;\n      let i = 0,\n        root = d3.hierarchy(parentContext.state.treeData, function (d) {\n          return d.children;\n        });\n\n      console.log(\"Fancy UI\", root)\n      // Collapse after second level\n      if (root.children != undefined) {\n        root.children.forEach(collapse);\n        root.x0 = 0;\n        root.y0 = 0;\n      }\n\n      const flexLayout = flextree.flextree();\n\n      update(root);\n      // Collapse the node and all it's children\n      function collapse(d) {\n        if (d.children) {\n          d._children = d.children\n          d._children.forEach(collapse)\n          d.children = null\n        }\n      }\n\n      function update(source) {\n\n        // Assigns the x and y position for the nodes\n        var treeData = flexLayout(root)\n\n        // Compute the new tree layout.\n        var nodes = treeData.descendants(),\n          links = treeData.descendants().slice(1);\n\n        // ****************** Nodes section ***************************\n\n        // Update the nodes...\n        var node = g.selectAll('g.node')\n          .data(nodes, d => d.id || (d.id = ++i));\n\n        // Enter any new modes at the parent's previous position.\n        var nodeEnter = node.enter().append('g')\n          .attr('class', 'node')\n          .attr(\"transform\", function (d) {\n            return \"translate(\" + source.x0 + \",\" + source.y0 + \")\";\n          })\n\n        // Add Circle for the nodes\n        nodeEnter.append('circle')\n          .attr('class', 'node')\n          .attr('r', 1e-6)\n          .style(\"fill\", function (d) {\n            return d._children ? \"lightsteelblue\" : \"#fff\";\n          });\n\n        // Add labels for the nodes\n        nodeEnter.append('text')\n          .attr('pointer-events', 'none')\n          .attr('dy', '0.35em')\n          .text(function (d) {\n            return d.data.name;\n          })\n          .attr('text-anchor', 'middle')\n\n        var timer = 0;\n        var delay = 200;\n        var prevent = false;\n\n        // Update\n        var nodeUpdate = nodeEnter.merge(node)\n          .attr(\"fill\", \"#fff\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", \"3px;\")\n          .style('font', '12px consolas')\n          .on(\"click\", function (d, i) {\n            timer = setTimeout(() => {\n              if (!prevent) {\n                toggleButton(this, d, i)\n              }\n              prevent = false;\n            }, delay);\n          })\n          .on(\"dblclick\", function (d, i) {\n            clearTimeout(timer);\n            prevent = true;\n            click(d, i)\n          });\n\n        // Transition to the proper position for the node\n        nodeUpdate.transition()\n          .duration(duration)\n          .attr(\"transform\", function (event, i, arr) {\n            const d = d3.select(this).datum();\n            return \"translate(\" + d.x + \",\" + d.y + \")\";\n          });\n\n        // Update the node attributes and style\n        nodeUpdate.select('circle.node')\n          .attr('r', 50)\n          .style(\"fill\", function (d) {\n            return d._children ? \"lightsteelblue\" : \"#fff\";\n          })\n          .style('-webkit-touch-callout', 'none')\n          .style('-webkit-user-select', 'none')\n          .style('-khtml-user-select', 'none')\n          .style('-moz-user-select', 'none')\n          .style('-ms-user-select', 'none')\n          .style('user-select', 'none')\n          .attr('cursor', 'pointer')\n\n        // Create Event Handlers for toggling buttons\n        function toggleButton(context, d, i) {\n          if (nodeUpdate.select('#button' + i.data.id).empty()) {\n            // Add buttons\n            var arc1 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(0)\n              .endAngle(30 * Math.PI / 180)\n            var arc2 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(35 * Math.PI / 180)\n              .endAngle(65 * Math.PI / 180)\n            var arc3 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(70 * Math.PI / 180)\n              .endAngle(100 * Math.PI / 180)\n            var arc4 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(105 * Math.PI / 180)\n              .endAngle(135 * Math.PI / 180)\n\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc1)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#7FFFD4')\n              .on('click', handleAddChild)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc2)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#FF00FF')\n              .on('click', handleAddSibling)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc3)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#00FF00')\n              .on('click', handleEdit)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc4)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#FF6347')\n              .on('click', handleDelete)\n          }\n          else {\n            // Delete button\n            nodeUpdate.selectAll('#button' + i.data.id).remove()\n            d3.select(context)\n              .on(\"click\", function (d, i) {\n                timer = setTimeout(() => {\n                  if (!prevent) {\n                    toggleButton(this, d, i)\n                  }\n                  prevent = false;\n                }, delay);\n              })\n          }\n        }\n\n        function handleAddChild(d, i) {\n          alert(\"add child\")\n          // console.log(this.props)\n          parentContext.addChild({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleAddSibling(d, i) {\n          alert(\"add sibling\")\n          parentContext.addSibling({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleEdit(d, i) {\n          alert(\"edit\")\n          window.location.href = \"note/\" + i.data.id\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleDelete(d, i) {\n          alert(\"delete\")\n          parentContext.deleteNote({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        // Remove any exiting nodes\n        var nodeExit = node.exit().transition()\n          .duration(duration)\n          .attr(\"transform\", function (event, i, arr) {\n            const d = d3.select(this).datum();\n            return \"translate(\" + source.x + \",\" + source.y + \")\";\n          })\n          .remove();\n\n        // On exit reduce the node circles size to 0\n        nodeExit.select('circle')\n          .attr('r', 1e-6);\n\n        // On exit reduce the opacity of text labels\n        nodeExit.select('text')\n          .style('fill-opacity', 1e-6)\n\n        // ****************** links section ******************\n\n        // Update the links...\n        var link = g.selectAll('path.link')\n          .data(links, function (d) {\n            return d.id;\n          });\n\n        // Enter any new links at the parent's previous position.\n        var linkEnter = link.enter().insert('path', \"g\")\n          .attr(\"class\", \"link\")\n          .attr('d', function (d) {\n            var o = {\n              x: source.x0,\n              y: source.y0\n            }\n            return diagonal(o, o)\n          });\n\n        // UPDATE\n        var linkUpdate = linkEnter.merge(link)\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \"#ccc\")\n          .attr(\"stroke-width\", \"2px\")\n\n        // Transition back to the parent element position\n        linkUpdate.transition()\n          .duration(duration)\n          .attr('d', function (d) {\n            return diagonal(d, d.parent)\n          });\n\n        // Remove any exiting links\n        var linkExit = link.exit().transition()\n          .duration(duration)\n          .attr('d', function (event, i, arr) {\n            const d = d3.select(this).datum();\n            var o = {\n              x: source.x,\n              y: source.y\n            }\n            return diagonal(o, o)\n          })\n          .remove();\n\n        // Store the old positions for transition.\n        nodes.forEach(function (d) {\n          d.x0 = d.x;\n          d.y0 = d.y;\n        });\n\n        // Creates a curved (diagonal) path from parent to the child nodes\n        function diagonal(s, d) {\n          const path = `M ${s.x} ${s.y}\n                  C ${(s.x + d.x) / 2} ${s.y},\n                  ${(s.x + d.x) / 2} ${d.y},\n                  ${d.x} ${d.y}`\n\n          return path\n        }\n\n        // Toggle children on click.\n        function click(event, d) {\n          if (d.children) {\n            d._children = d.children;\n            d.children = null;\n          } else {\n            d.children = d._children;\n            d._children = null;\n          }\n          update(d);\n        }\n      }\n    },\n    [parentContext.state.treeData]\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 1000,\n        width: \"100%\",\n        marginRight: \"0px\",\n        marginLeft: \"0px\",\n      }}\n    >\n      {/* <g className=\"plot-area\" /> */}\n    </svg>\n  );\n}\n\nexport default GraphUI;","import React from 'react';\nimport * as d3 from 'd3';\n\nexport const useD3 = (renderTreeFn, dependencies) => {\n    const ref = React.useRef();\n\n    React.useEffect(() => {\n        renderTreeFn(d3.select(ref.current));\n        return () => {};\n      }, dependencies);\n    return ref;\n}","import axios from \"axios\";\nimport GraphUI from \"./GraphUI\"\nimport React from \"react\";\n\n\nclass AllNotes extends React.Component {\n  state = {\n    allNotes: [],\n    links: {},\n    treeData: {},\n    titleMap:{}\n  };\n\n  saveLinks(){\n    axios\n    .post(\"/api/links\", {links: JSON.stringify(this.state.links)})\n    .then(res => {\n    console.log(\"saving\", res.data)\n    console.log(\"tree data\", JSON.stringify(this.state.treeData))\n    })\n  }\n\n  updateTitleMap(){\n    var titleMap = {}\n    this.state.allNotes.forEach(note => {\n      titleMap[note._id] = note.title\n    })\n    this.setState({titleMap:titleMap})\n  }\n  // driver function\n  populateTreeData() {\n    if (Object.keys(this.state.links).length == 0)return\n    var treeData = this.recurseTreeData(this.state.links, Object.keys(this.state.links)[0])\n    this.setState({ \n      treeData: treeData,\n    });\n  }\n\n  // recursion\n  recurseTreeData(links, id) {\n    if (links[id].length == 0) {\n      return {\n        \"name\": this.state.titleMap[id],\n        \"id\": id,\n        \"size\": [150, 150],\n        \"children\": []\n      }\n    }\n\n    var treeData = {\n      \"name\": this.state.titleMap[id],\n      \"id\": id,\n      \"size\": [150, 150],\n      \"children\": []\n    }\n    links[id].forEach(childId => {\n      treeData.children.push(this.recurseTreeData(links, childId))\n    });\n    return treeData\n  }\n\n  init() {\n    // there should not be a case when allNotes length is 0 and links is not 0\n    if (this.state.allNotes.length == 0) {\n      axios\n      .post(\"/api/notes/\", {title: \"Master\", content: \"-\"})\n      .then(() => {\n        axios\n        .get(\"/api/notes\")\n        .then(res => {\n          const notes = res.data;\n          var rootLink = res.data[0]._id\n          this.setState({ \n            allNotes: notes\n          });\n          var links = this.state.links\n          links[rootLink] = []\n          this.setState({links:links})\n        })\n        .then(() => {\n          this.updateTitleMap()\n          this.populateTreeData()\n        })\n      })\n    }\n    else {\n      axios\n      .get(\"/api/links\")\n      .then(res => {\n        const links = JSON.parse(res.data[0].links)\n        this.setState({ \n          links: links,\n        });\n      })\n      .then(() => {\n        this.updateTitleMap()\n        this.populateTreeData()\n      })\n    }\n  }\n\n  componentDidMount() {\n    axios\n    .get(\"/api/notes\")\n    .then(res => {\n      const notes = res.data;\n      this.setState({ \n        allNotes: notes,\n      });\n      this.updateTitleMap()\n    })\n    .then(() => {\n      this.init()\n    })\n  }\n\n  deleteLinks(id){\n    if (this.state.links[id] === undefined) {\n      return\n    }\n    if (this.state.links[id].length == 0) {\n      delete this.state.links[id]\n    }\n    else {\n      this.state.links[id].forEach(element => {\n        this.deleteLinks(element)\n      });\n      delete this.state.links[id]\n    }\n    this.setState({links:this.state.links})\n  }\n\n  deleteNote({variables}) {\n    axios\n    .delete(\"/api/notes/\" + variables._id)\n    .then(() => {\n      axios\n      .get(\"/api/notes\")\n      .then(res => {\n        const notes = res.data;\n        this.setState({ \n          allNotes: notes\n        });\n        for (const [key, value] of Object.entries(this.state.links)) {\n          if (this.state.links[key].includes(variables._id)) {\n            const index = this.state.links[key].indexOf(variables._id)\n            if (index > -1) {\n              this.state.links[key].splice(index, 1)\n              break\n            }\n          }\n        }\n      })\n      .then(() => {\n        this.deleteLinks(variables._id)\n        this.saveLinks()\n      })\n      .then(() => {\n        if(this.state.AllNotes === undefined)this.init()\n      })\n      .then(() =>{\n        this.updateTitleMap()\n        this.populateTreeData()\n        this.props.history.push(\"/\")\n      })\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  addChild({variables}) {\n    axios\n    .get(\"/api/notes/addChild/\" + variables._id)\n    .then(res => {\n      const newChild = res.data;\n      this.setState({ \n        allNotes: this.state.allNotes.concat([newChild])\n      });\n      this.state.links[variables._id].push(newChild._id)\n      this.state.links[newChild._id] = []\n      this.setState({links:this.state.links})\n    })\n    .then(() => {\n      this.updateTitleMap()\n      this.populateTreeData()\n      this.props.history.push(\"/\");\n      \n    })\n    .then(() => {\n      this.saveLinks()\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  addSibling({variables}) {\n    axios\n    .get(\"/api/notes/addSibling/\" + variables._id)\n    .then(res => {\n      const newSibling = res.data;\n      this.setState({ \n        allNotes: this.state.allNotes.concat([newSibling])\n      });\n      for (const [key, value] of Object.entries(this.state.links)) {\n        if (this.state.links[key].includes(variables._id)) {\n          this.state.links[key].push(newSibling._id)\n          this.state.links[newSibling._id] = []\n          break\n        }\n      }\n    })\n    .then(() => {\n      this.saveLinks()\n    })\n    .then(() => {\n      this.updateTitleMap()\n      this.populateTreeData()\n      this.props.history.push(\"/\");\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <GraphUI parentContext={this} />\n        </header>\n      </div>\n    );\n  };\n}\n\nexport default AllNotes;","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\n\nclass NewNote extends React.Component {\n  state = {\n    title: '',\n    content: ''\n  }\n\n  setTitle(title) {\n    this.setState({\n      title: title\n    })\n  }\n\n  setContent(content) {\n    this.setState({\n      content: content\n    })\n  }\n\n  createNote({variables}) {\n    const newNote = {\n      title: variables.title,\n      content: variables.content,\n    }\n    axios\n    .post(\"/api/notes/\", newNote)\n    .then(res => {\n      this.props.history.push(\"/\");\n    })\n  }\n\n  render() {\n    console.log(\"render is called\")\n    return (\n      <div className=\"container m-t-20\">\n        <h1 className=\"page-title\">New Note</h1>\n\n        <div className=\"newnote-page m-t-20\">\n          <form\n            onSubmit={e => {\n              e.preventDefault();\n\n              this.createNote({\n                variables: {\n                  title: this.state.title,\n                  content: this.state.content\n                }\n              });\n            }}\n          >\n            <div className=\"field\">\n              <label className=\"label\">Note Title</label>\n              <div className=\"control\">\n                <input\n                  className=\"input\"\n                  name=\"title\"\n                  type=\"text\"\n                  placeholder=\"Note Title\"\n                  value={this.state.title}\n                  onChange={e => this.setTitle(e.target.value)}\n                />\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <label className=\"label\">Note Content</label>\n              <div className=\"control\">\n                <textarea\n                  className=\"textarea\"\n                  name=\"content\"\n                  rows=\"10\"\n                  placeholder=\"Note Content here...\"\n                  value={this.state.content}\n                  onChange={e => this.setContent(e.target.value)}\n                ></textarea>\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <div className=\"control\">\n                <button className=\"button is-link\">Submit</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default withRouter(NewNote);\n","import React from \"react\";\nimport { notify } from \"react-notify-toast\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\n\nclass EditNote extends React.Component {\n  state = {\n    _id: '',\n    title: '',\n    content: ''\n  }\n  \n  componentDidMount() {\n    axios\n    .get(\"/api/notes/\" + this.props.match.params.id)\n    .then(res => {\n      this.setState({\n        _id: res.data._id,\n        title: res.data.title,\n        content: res.data.content\n      })\n    })\n  }\n\n  setTitle(title) {\n    this.setState({\n      title: title\n    })\n  }\n\n  setContent(content) {\n    this.setState({\n      content: content\n    })\n  }\n\n  updateNote({variables}) {\n    const editedNote = {\n      title: variables.title,\n      content: variables.content,\n    }\n    axios\n    .put(\"/api/notes/\" + variables._id, editedNote)\n    .then(res => {\n      console.log(res.data)\n      this.props.history.push(\"/\");\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"container m-t-20\">\n        <h1 className=\"page-title\">Edit Note</h1>\n\n        <div className=\"newnote-page m-t-20\">\n          <form\n            onSubmit={e => {\n              // Stop the form from submitting\n              e.preventDefault();\n\n              this.updateNote({\n                variables: {\n                  _id: this.state._id,\n                  title: this.state.title,\n                  content: this.state.content\n                }\n              });\n\n              notify.show(\"Note was edited successfully\", \"success\");\n            }}\n          >\n            <div className=\"field\">\n              <label className=\"label\">Note Title</label>\n              <div className=\"control\">\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"title\"\n                  placeholder=\"Note Title\"\n                  defaultValue={this.state.title}\n                  onChange={e => this.setTitle(e.target.value)}\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <label className=\"label\">Note Content</label>\n              <div className=\"control\">\n                <textarea\n                  className=\"textarea\"\n                  rows=\"10\"\n                  name=\"content\"\n                  type=\"text\"\n                  placeholder=\"Note Content here...\"\n                  value={this.state.content}\n                  onChange={e => this.setContent(e.target.value)}\n                  required\n                ></textarea>\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <div className=\"control\">\n                <button className=\"button is-link\">Submit</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default withRouter(EditNote);\n","import React from 'react';\nimport axios from \"axios\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport 'react-quill/dist/quill.bubble.css';\nimport './ReactQuilComp.css'\n\n\nclass RichTextEditor extends React.Component {\n  constructor(props) {\n    super(props)\n    this.quillRef = null;      // Quill instance\n    this.reactQuillRef = null; // ReactQuill component\n\n    this.state = {\n      _id: '',\n      title: '',\n      content: '',\n      theme: 'snow'\n    }\n\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  componentDidMount() {\n    this.quillRef = this.reactQuillRef.getEditor();\n\n    axios\n    .get(\"/api/notes/\" + this.props.match.params.id)\n    .then(res => {\n      this.setState({\n        _id: res.data._id,\n        // title: res.data.title,\n        content: res.data.content\n      })\n    })\n    .then(() => {\n      this.loadText()\n    })\n  }\n\n  updateNote = () => {\n    const editedNote = {\n      title: 'title',\n      content: this.state.content,\n    }\n    axios\n    .put(\"/api/notes/\" + this.state._id, editedNote)\n    .then(res => {\n      console.log(res.data)\n      // this.props.history.push(\"/\");\n    })\n  }\n\n  loadText = () => {\n    this.quillRef.setContents(JSON.parse(this.state.content))\n  }\n\n  handleChange (content, delta, source, editor) {\n    this.state.content = JSON.stringify(editor.getContents())\n  }\n\n  // handleThemeChange (newTheme) {\n  //   if (newTheme === \"core\") newTheme = null;\n  //   this.setState({ theme: newTheme })\n  // }\n\n\n  render() {\n    return (\n      <div>\n        <ReactQuill\n          id=\"title\"\n          theme='bubble'\n          onChange={this.handleChange}\n          modules={RichTextEditor.modules}\n          formats={RichTextEditor.formats}\n        />\n        <ReactQuill\n          ref={(el) => { this.reactQuillRef = el }}\n          theme={this.state.theme}\n          onChange={this.handleChange}\n          modules={RichTextEditor.modules}\n          formats={RichTextEditor.formats}\n        />\n        {/* <div className=\"themeSwitcher\">\n          <label>Theme </label>\n          <select onChange={(e) => \n              this.handleThemeChange(e.target.value)}>\n            <option value=\"snow\">Snow</option>\n            <option value=\"bubble\">Bubble</option>\n            <option value=\"core\">Core</option>\n          </select>\n        </div> */}\n        <button id=\"save\" onClick={this.updateNote}>Save</button>\n       </div>\n     )\n  }\n}\n\n/* \n * Quill modules to attach to editor\n * See https://quilljs.com/docs/modules/ for complete options\n */\nRichTextEditor.modules = {\n  toolbar: [\n    [{ 'header': '1'}, {'header': '2'}, { 'font': [] }],\n    [{size: []}],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n    [{'list': 'ordered'}, {'list': 'bullet'}, \n     {'indent': '-1'}, {'indent': '+1'}],\n    ['link', 'image', 'video'],\n    ['clean']\n  ],\n  clipboard: {\n    // toggle to add extra line breaks when pasting HTML:\n    matchVisual: false,\n  }\n}\n\n/* \n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nRichTextEditor.formats = [\n  'header', 'font', 'size',\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\n  'list', 'bullet', 'indent',\n  'link', 'image', 'video'\n]\n\nexport default RichTextEditor;","import React from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AllNotes from \"./AllNotes\";\nimport NewNote from \"./NewNote\";\nimport EditNote from \"./EditNote\";\n// import EditorApp from \"./editor/App\"\n// import EditorComponent from \"./editor/editor/editor\"\nimport RichTextEditor from \"./ReactQuilComp\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <nav\n          className=\"navbar App-header\"\n          role=\"navigation\"\n          aria-label=\"main navigation\"\n        >\n          <div className=\"navbar-brand\">\n            <Link to=\"/\" className=\"navbar-item\">\n              Trees\n            </Link>\n          </div>\n\n          <div className=\"navbar-end\">\n            <Link to=\"/\" className=\"navbar-item\">\n              All Notes\n            </Link>\n\n            {/* <Link to=\"/newnote\" className=\"navbar-item\"> */}\n            <Link to=\"/editorapp\" className=\"navbar-item\">\n              New Note\n            </Link>\n          </div>\n        </nav>\n\n        <Route exact path=\"/\" component={AllNotes} />\n        <Route path=\"/newnote\" component={NewNote} />\n        <Route path=\"/note/:id\" component={RichTextEditor} />\n        {/* <Route path=\"/editorapp\" component={RichTextEditor} /> */}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Notifications from \"react-notify-toast\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <div>\n    <Notifications />\n    <App />\n  </div>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}