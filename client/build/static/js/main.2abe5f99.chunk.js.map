{"version":3,"sources":["GraphUI.js","hooks/useD3.js","AllNotes.js","NewNote.js","EditNote.js","ReactQuilComp.js","reactQuillComp_custom.js","App.js","serviceWorker.js","index.js"],"names":["GraphUI","parentContext","ref","renderTreeFn","dependencies","React","useRef","useEffect","d3","current","useD3","svg","width","window","innerWidth","height","innerHeight","remove","g","attr","append","i","root","state","treeData","d","children","console","log","undefined","forEach","collapse","_children","x0","y0","flexLayout","flextree","update","source","nodes","descendants","links","slice","node","selectAll","data","id","nodeEnter","enter","style","text","name","timer","prevent","nodeUpdate","merge","on","setTimeout","toggleButton","context","select","empty","arc1","innerRadius","outerRadius","startAngle","endAngle","Math","PI","arc2","arc3","arc4","handleAddChild","handleAddSibling","handleEdit","handleDelete","clearTimeout","click","alert","addChild","variables","_id","stopPropagation","addSibling","localStorage","setItem","location","href","deleteNote","transition","duration","event","arr","this","datum","x","y","nodeExit","exit","link","insert","o","diagonal","parent","s","marginRight","marginLeft","AllNotes","allNotes","titleMap","axios","post","JSON","stringify","then","res","note","title","setState","Object","keys","length","recurseTreeData","childId","push","content","get","notes","rootLink","updateTitleMap","populateTreeData","parse","init","element","deleteLinks","delete","entries","key","includes","index","indexOf","splice","saveLinks","props","history","catch","err","newChild","concat","newSibling","className","Component","NewNote","newNote","onSubmit","e","preventDefault","createNote","type","placeholder","value","onChange","setTitle","target","rows","setContent","withRouter","EditNote","match","params","editedNote","put","updateNote","notify","show","defaultValue","required","RichTextEditor","bodyContent","loadText","quillRef_body","setContents","quillRef_title","reactQuillRef_body","reactQuillRef_title","titleContent","theme","handleBodyChange","bind","handleTitleChange","curr_id","getItem","getEditor","delta","editor","getContents","el","modules","formats","onClick","toolbar","size","clipboard","matchVisual","CustomHeart","CustomToolbar","selected","Size","Quill","import","whitelist","register","Font","Editor","editorHtml","handleChange","html","container","handlers","insertHeart","cursorPosition","quill","getSelection","insertText","setSelection","App","role","aria-label","to","exact","path","component","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2abe5f99.chunk.js","sourcesContent":["import { useD3 } from './hooks/useD3';\nimport React from \"react\";\nimport * as d3 from 'd3';\nimport * as flextree from 'd3-flextree'\nimport { propTypes } from 'react-bootstrap/esm/Image';\nimport { useHistory } from 'react-router-dom';\n\n\nfunction GraphUI({ parentContext }) {\n  const ref = useD3(\n    (svg) => {\n      var width = window.innerWidth,\n        height = window.innerHeight;\n\n      // Remove the old svg\n      d3.selectAll(\"g > *\").remove();\n\n      // append the svg object to the body of the page\n      const g = svg\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .append(\"g\")\n        .attr('transform', `translate(${width / 2},100)`)\n\n\n      const duration = 750;\n      let i = 0,\n        root = d3.hierarchy(parentContext.state.treeData, function (d) {\n          return d.children;\n        });\n\n      console.log(\"Fancy UI\", root)\n      // Collapse after second level\n      if (root.children != undefined) {\n        root.children.forEach(collapse);\n        root.x0 = 0;\n        root.y0 = 0;\n      }\n\n      const flexLayout = flextree.flextree();\n\n      update(root);\n      // Collapse the node and all it's children\n      function collapse(d) {\n        if (d.children) {\n          d._children = d.children\n          d._children.forEach(collapse)\n          d.children = null\n        }\n      }\n\n      function update(source) {\n\n        // Assigns the x and y position for the nodes\n        var treeData = flexLayout(root)\n\n        // Compute the new tree layout.\n        var nodes = treeData.descendants(),\n          links = treeData.descendants().slice(1);\n\n        // ****************** Nodes section ***************************\n\n        // Update the nodes...\n        var node = g.selectAll('g.node')\n          .data(nodes, d => d.id || (d.id = ++i));\n\n        // Enter any new modes at the parent's previous position.\n        var nodeEnter = node.enter().append('g')\n          .attr('class', 'node')\n          .attr(\"transform\", function (d) {\n            return \"translate(\" + source.x0 + \",\" + source.y0 + \")\";\n          })\n\n        // Add Circle for the nodes\n        nodeEnter.append('circle')\n          .attr('class', 'node')\n          .attr('r', 1e-6)\n          .style(\"fill\", function (d) {\n            return d._children ? \"lightsteelblue\" : \"#fff\";\n          });\n\n        // Add labels for the nodes\n        nodeEnter.append('text')\n          .attr('pointer-events', 'none')\n          .attr('dy', '0.35em')\n          .text(function (d) {\n            return d.data.name;\n          })\n          .attr('text-anchor', 'middle')\n\n        var timer = 0;\n        var delay = 200;\n        var prevent = false;\n\n        // Update\n        var nodeUpdate = nodeEnter.merge(node)\n          .attr(\"fill\", \"#fff\")\n          .attr(\"stroke\", \"black\")\n          .attr(\"stroke-width\", \"3px;\")\n          .style('font', '12px consolas')\n          .on(\"click\", function (d, i) {\n            timer = setTimeout(() => {\n              if (!prevent) {\n                toggleButton(this, d, i)\n              }\n              prevent = false;\n            }, delay);\n          })\n          .on(\"dblclick\", function (d, i) {\n            clearTimeout(timer);\n            prevent = true;\n            click(d, i)\n          });\n\n        // Transition to the proper position for the node\n        nodeUpdate.transition()\n          .duration(duration)\n          .attr(\"transform\", function (event, i, arr) {\n            const d = d3.select(this).datum();\n            return \"translate(\" + d.x + \",\" + d.y + \")\";\n          });\n\n        // Update the node attributes and style\n        nodeUpdate.select('circle.node')\n          .attr('r', 50)\n          .style(\"fill\", function (d) {\n            return d._children ? \"lightsteelblue\" : \"#fff\";\n          })\n          .style('-webkit-touch-callout', 'none')\n          .style('-webkit-user-select', 'none')\n          .style('-khtml-user-select', 'none')\n          .style('-moz-user-select', 'none')\n          .style('-ms-user-select', 'none')\n          .style('user-select', 'none')\n          .attr('cursor', 'pointer')\n\n        // Create Event Handlers for toggling buttons\n        function toggleButton(context, d, i) {\n          if (nodeUpdate.select('#button' + i.data.id).empty()) {\n            // Add buttons\n            var arc1 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(0)\n              .endAngle(30 * Math.PI / 180)\n            var arc2 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(35 * Math.PI / 180)\n              .endAngle(65 * Math.PI / 180)\n            var arc3 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(70 * Math.PI / 180)\n              .endAngle(100 * Math.PI / 180)\n            var arc4 = d3.arc()\n              .innerRadius(55)\n              .outerRadius(75)\n              .startAngle(105 * Math.PI / 180)\n              .endAngle(135 * Math.PI / 180)\n\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc1)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#7FFFD4')\n              .on('click', handleAddChild)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc2)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#FF00FF')\n              .on('click', handleAddSibling)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc3)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#00FF00')\n              .on('click', handleEdit)\n            d3.select(context)\n              .append('path')\n              .attr('id', 'button' + i.data.id)\n              .attr('d', arc4)\n              .attr('cursor', 'pointer')\n              .attr('fill', '#FF6347')\n              .on('click', handleDelete)\n          }\n          else {\n            // Delete button\n            nodeUpdate.selectAll('#button' + i.data.id).remove()\n            d3.select(context)\n              .on(\"click\", function (d, i) {\n                timer = setTimeout(() => {\n                  if (!prevent) {\n                    toggleButton(this, d, i)\n                  }\n                  prevent = false;\n                }, delay);\n              })\n          }\n        }\n\n        function handleAddChild(d, i) {\n          alert(\"add child\")\n          // console.log(this.props)\n          parentContext.addChild({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleAddSibling(d, i) {\n          alert(\"add sibling\")\n          parentContext.addSibling({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleEdit(d, i) {\n          // const history = useHistory();\n          localStorage.setItem(\"current_id\", i.data.id);\n          \n          console.log(\"Accessing from graph ui\",i.data.id)\n          alert(\"edit\")\n          window.location.href = \"/\"\n          window.location.href=\"/editorapp2\"\n          \n          // history.push(\"note/\" + i.data.id)\n          // history.push(\"note/\" + i.data.id)\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        function handleDelete(d, i) {\n          alert(\"delete\")\n          parentContext.deleteNote({ variables: { _id: i.data.id } })\n          d.stopPropagation()  // Prevent propagation to parent\n        }\n\n        // Remove any exiting nodes\n        var nodeExit = node.exit().transition()\n          .duration(duration)\n          .attr(\"transform\", function (event, i, arr) {\n            const d = d3.select(this).datum();\n            return \"translate(\" + source.x + \",\" + source.y + \")\";\n          })\n          .remove();\n\n        // On exit reduce the node circles size to 0\n        nodeExit.select('circle')\n          .attr('r', 1e-6);\n\n        // On exit reduce the opacity of text labels\n        nodeExit.select('text')\n          .style('fill-opacity', 1e-6)\n\n        // ****************** links section ******************\n\n        // Update the links...\n        var link = g.selectAll('path.link')\n          .data(links, function (d) {\n            return d.id;\n          });\n\n        // Enter any new links at the parent's previous position.\n        var linkEnter = link.enter().insert('path', \"g\")\n          .attr(\"class\", \"link\")\n          .attr('d', function (d) {\n            var o = {\n              x: source.x0,\n              y: source.y0\n            }\n            return diagonal(o, o)\n          });\n\n        // UPDATE\n        var linkUpdate = linkEnter.merge(link)\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \"#ccc\")\n          .attr(\"stroke-width\", \"2px\")\n\n        // Transition back to the parent element position\n        linkUpdate.transition()\n          .duration(duration)\n          .attr('d', function (d) {\n            return diagonal(d, d.parent)\n          });\n\n        // Remove any exiting links\n        var linkExit = link.exit().transition()\n          .duration(duration)\n          .attr('d', function (event, i, arr) {\n            const d = d3.select(this).datum();\n            var o = {\n              x: source.x,\n              y: source.y\n            }\n            return diagonal(o, o)\n          })\n          .remove();\n\n        // Store the old positions for transition.\n        nodes.forEach(function (d) {\n          d.x0 = d.x;\n          d.y0 = d.y;\n        });\n\n        // Creates a curved (diagonal) path from parent to the child nodes\n        function diagonal(s, d) {\n          const path = `M ${s.x} ${s.y}\n                  C ${(s.x + d.x) / 2} ${s.y},\n                  ${(s.x + d.x) / 2} ${d.y},\n                  ${d.x} ${d.y}`\n\n          return path\n        }\n\n        // Toggle children on click.\n        function click(event, d) {\n          if (d.children) {\n            d._children = d.children;\n            d.children = null;\n          } else {\n            d.children = d._children;\n            d._children = null;\n          }\n          update(d);\n        }\n      }\n    },\n    [parentContext.state.treeData]\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 1000,\n        width: \"100%\",\n        marginRight: \"0px\",\n        marginLeft: \"0px\",\n      }}\n    >\n      {/* <g className=\"plot-area\" /> */}\n    </svg>\n  );\n}\n\nexport default GraphUI;","import React from 'react';\nimport * as d3 from 'd3';\n\nexport const useD3 = (renderTreeFn, dependencies) => {\n    const ref = React.useRef();\n\n    React.useEffect(() => {\n        renderTreeFn(d3.select(ref.current));\n        return () => {};\n      }, dependencies);\n    return ref;\n}","import axios from \"axios\";\nimport GraphUI from \"./GraphUI\"\nimport React from \"react\";\n\n\nclass AllNotes extends React.Component {\n  state = {\n    allNotes: [],\n    links: {},\n    treeData: {},\n    titleMap:{}\n  };\n\n  saveLinks(){\n    axios\n    .post(\"/api/links\", {links: JSON.stringify(this.state.links)})\n    .then(res => {\n    console.log(\"saving\", res.data)\n    console.log(\"tree data\", JSON.stringify(this.state.treeData))\n    })\n  }\n\n  updateTitleMap(){  \n     //this maps note ids to titles (plain Text) to allow easy recursion while creating the tree data structure for rendering\n    var titleMap = {}\n    this.state.allNotes.forEach(note => {\n      titleMap[note._id] = note.title\n    })\n    this.setState({titleMap:titleMap})\n  }\n  // driver function\n  populateTreeData() {\n    //populates the tree data structure\n    if (Object.keys(this.state.links).length == 0)return\n    var treeData = this.recurseTreeData(this.state.links, Object.keys(this.state.links)[0])\n    this.setState({ \n      treeData: treeData,\n    });\n  }\n\n  // recursion\n  recurseTreeData(links, id) {\n    if (links[id].length == 0) {\n      return {\n        \"name\": this.state.titleMap[id],\n        \"id\": id,\n        \"size\": [150, 150],\n        \"children\": []\n      }\n    }\n\n    var treeData = {\n      \"name\": this.state.titleMap[id],\n      \"id\": id,\n      \"size\": [150, 150],\n      \"children\": []\n    }\n    links[id].forEach(childId => {\n      treeData.children.push(this.recurseTreeData(links, childId))\n    });\n    return treeData\n  }\n\n  init() {\n    // there should not be a case when allNotes length is 0 and links is not 0\n    if (this.state.allNotes.length == 0) {\n      console.log(\"initializing...\")\n      axios\n      .post(\"/api/notes\", {title: \"Master\", content: \"-\"})\n      .then(() => {\n        axios\n        .get(\"/api/notes\")\n        .then(res => {\n          const notes = res.data;\n          var rootLink = res.data[0]._id\n          this.setState({ \n            allNotes: notes\n          });\n          var links = this.state.links\n          links[rootLink] = []\n          this.setState({links:links})\n        })\n        .then(() => {\n          this.updateTitleMap()\n          this.populateTreeData()\n        })\n      })\n    }\n    else {\n      axios\n      .get(\"/api/links\")\n      .then(res => {\n        const links = JSON.parse(res.data[0].links)\n        this.setState({ \n          links: links,\n        });\n      })\n      .then(() => {\n        this.updateTitleMap()\n        this.populateTreeData()\n      })\n    }\n  }\n\n  componentDidMount() {\n    axios\n    .get(\"/api/notes\")\n    .then(res => {\n      console.log(\"HEYYY\")\n      const notes = res.data;\n      this.setState({ \n        allNotes: notes,\n      });\n      this.updateTitleMap()\n    })\n    .then(() => {\n      this.init()\n    })\n  }\n\n  deleteLinks(id){\n    if (this.state.links[id] === undefined) {\n      return\n    }\n    if (this.state.links[id].length == 0) {\n      delete this.state.links[id]\n    }\n    else {\n      this.state.links[id].forEach(element => {\n        this.deleteLinks(element)\n      });\n      delete this.state.links[id]\n    }\n    this.setState({links:this.state.links})\n  }\n\n  deleteNote({variables}) {\n    axios\n    .delete(\"/api/notes\" + variables._id)\n    .then(() => {\n      axios\n      .get(\"/api/notes\")\n      .then(res => {\n        const notes = res.data;\n        this.setState({ \n          allNotes: notes\n        });\n        for (const [key, value] of Object.entries(this.state.links)) {\n          if (this.state.links[key].includes(variables._id)) {\n            const index = this.state.links[key].indexOf(variables._id)\n            if (index > -1) {\n              this.state.links[key].splice(index, 1)\n              break\n            }\n          }\n        }\n      })\n      .then(() => {\n        this.deleteLinks(variables._id)\n        this.saveLinks()\n      })\n      .then(() => {\n        if(this.state.AllNotes === undefined)this.init()\n      })\n      .then(() =>{\n        this.updateTitleMap()\n        this.populateTreeData()\n        this.props.history.push(\"/\")\n      })\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  addChild({variables}) {\n    axios\n    .get(\"/api/notes/addChild/\" + variables._id)\n    .then(res => {\n      const newChild = res.data;\n      this.setState({ \n        allNotes: this.state.allNotes.concat([newChild])\n      });\n      this.state.links[variables._id].push(newChild._id)\n      this.state.links[newChild._id] = []\n      this.setState({links:this.state.links})\n    })\n    .then(() => {\n      this.updateTitleMap()\n      this.populateTreeData()\n      this.props.history.push(\"/\");\n      \n    })\n    .then(() => {\n      this.saveLinks()\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  addSibling({variables}) {\n    axios\n    .get(\"/api/notes/addSibling/\" + variables._id)\n    .then(res => {\n      const newSibling = res.data;\n      this.setState({ \n        allNotes: this.state.allNotes.concat([newSibling])\n      });\n      for (const [key, value] of Object.entries(this.state.links)) {\n        if (this.state.links[key].includes(variables._id)) {\n          this.state.links[key].push(newSibling._id)\n          this.state.links[newSibling._id] = []\n          break\n        }\n      }\n    })\n    .then(() => {\n      this.saveLinks()\n    })\n    .then(() => {\n      this.updateTitleMap()\n      this.populateTreeData()\n      this.props.history.push(\"/\");\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <GraphUI parentContext={this} />\n        </header>\n      </div>\n    );\n  };\n}\n\nexport default AllNotes;","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\n\nclass NewNote extends React.Component {\n  state = {\n    title: '',\n    content: ''\n  }\n\n  setTitle(title) {\n    this.setState({\n      title: title\n    })\n  }\n\n  setContent(content) {\n    this.setState({\n      content: content\n    })\n  }\n\n  createNote({variables}) {\n    const newNote = {\n      title: variables.title,\n      content: variables.content,\n    }\n    axios\n    .post(\"/api/notes\", newNote)\n    .then(res => {\n      this.props.history.push(\"/\");\n    })\n  }\n\n  render() {\n    console.log(\"render is called\")\n    return (\n      <div className=\"container m-t-20\">\n        <h1 className=\"page-title\">New Note</h1>\n\n        <div className=\"newnote-page m-t-20\">\n          <form\n            onSubmit={e => {\n              e.preventDefault();\n\n              this.createNote({\n                variables: {\n                  title: this.state.title,\n                  content: this.state.content\n                }\n              });\n            }}\n          >\n            <div className=\"field\">\n              <label className=\"label\">Note Title</label>\n              <div className=\"control\">\n                <input\n                  className=\"input\"\n                  name=\"title\"\n                  type=\"text\"\n                  placeholder=\"Note Title\"\n                  value={this.state.title}\n                  onChange={e => this.setTitle(e.target.value)}\n                />\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <label className=\"label\">Note Content</label>\n              <div className=\"control\">\n                <textarea\n                  className=\"textarea\"\n                  name=\"content\"\n                  rows=\"10\"\n                  placeholder=\"Note Content here...\"\n                  value={this.state.content}\n                  onChange={e => this.setContent(e.target.value)}\n                ></textarea>\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <div className=\"control\">\n                <button className=\"button is-link\">Submit</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default withRouter(NewNote);\n","import React from \"react\";\nimport { notify } from \"react-notify-toast\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\n\nclass EditNote extends React.Component {\n  state = {\n    _id: '',\n    title: '',\n    content: ''\n  }\n  \n  componentDidMount() {\n    axios\n    .get(\"/api/notes\" + this.props.match.params.id)\n    .then(res => {\n      this.setState({\n        _id: res.data._id,\n        title: res.data.title,\n        content: res.data.content\n      })\n    })\n  }\n\n  setTitle(title) {\n    this.setState({\n      title: title\n    })\n  }\n\n  setContent(content) {\n    this.setState({\n      content: content\n    })\n  }\n\n  updateNote({variables}) {\n    const editedNote = {\n      title: variables.title,\n      content: variables.content,\n    }\n    axios\n    .put(\"/api/notes/\" + variables._id, editedNote)\n    .then(res => {\n      console.log(res.data)\n      this.props.history.push(\"/\");\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"container m-t-20\">\n        <h1 className=\"page-title\">Edit Note</h1>\n\n        <div className=\"newnote-page m-t-20\">\n          <form\n            onSubmit={e => {\n              // Stop the form from submitting\n              e.preventDefault();\n\n              this.updateNote({\n                variables: {\n                  _id: this.state._id,\n                  title: this.state.title,\n                  content: this.state.content\n                }\n              });\n\n              notify.show(\"Note was edited successfully\", \"success\");\n            }}\n          >\n            <div className=\"field\">\n              <label className=\"label\">Note Title</label>\n              <div className=\"control\">\n                <input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"title\"\n                  placeholder=\"Note Title\"\n                  defaultValue={this.state.title}\n                  onChange={e => this.setTitle(e.target.value)}\n                  required\n                />\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <label className=\"label\">Note Content</label>\n              <div className=\"control\">\n                <textarea\n                  className=\"textarea\"\n                  rows=\"10\"\n                  name=\"content\"\n                  type=\"text\"\n                  placeholder=\"Note Content here...\"\n                  value={this.state.content}\n                  onChange={e => this.setContent(e.target.value)}\n                  required\n                ></textarea>\n              </div>\n            </div>\n\n            <div className=\"field\">\n              <div className=\"control\">\n                <button className=\"button is-link\">Submit</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default withRouter(EditNote);\n","import React from 'react';\nimport axios from \"axios\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport 'react-quill/dist/quill.bubble.css';\nimport './ReactQuilComp.css'\n\n\nclass RichTextEditor extends React.Component {\n  constructor(props) {\n    super(props)\n    this.quillRef_body = null;      // Quill instance\n    this.reactQuillRef_body = null; // ReactQuill component\n\n    this.quillRef_title = null;      // Quill instance\n    this.reactQuillRef_title = null; // ReactQuill component\n\n\n    this.state = {\n      _id: '',\n      title: '',\n      titleContent :'',\n      bodyContent: '',\n      theme: 'snow'\n    }\n\n    this.handleBodyChange = this.handleBodyChange.bind(this)\n    this.handleTitleChange = this.handleTitleChange.bind(this)\n  }\n\n  componentDidMount() {\n    console.log(\"Logging 1\")\n    var curr_id = localStorage.getItem(\"current_id\");\n    console.log(\"Accessing id for\",curr_id)\n    this.quillRef_body = this.reactQuillRef_body.getEditor();\n    this.quillRef_title = this.reactQuillRef_title.getEditor();\n    // var curr_id = localStorage.getItem(\"current_id\");\n\n    axios\n    // .get(\"/api/notes/\" + this.props.match.params.id)\n    .get(\"/api/notes/\" + curr_id)\n    .then(res => {\n      this.setState({\n        _id: res.data._id,\n        title: res.data.title,\n        bodyContent: res.data.content\n      })\n      console.log(\"contents 2\",res.data.content)\n\n    })\n    .then(() => {\n      this.loadText()\n    })\n  }\n\n  updateNote = () => {\n    const editedNote = {\n      title: this.state.title || 'title' ,\n      content: this.state.bodyContent,\n    }\n    axios\n    .put(\"/api/notes/\" + this.state._id, editedNote)\n    .then(res => {\n      console.log(res.data)\n      // this.props.history.push(\"/\");\n    })\n  }\n\n  loadText = () => {\n    console.log(\"contents loadText\",this.state.bodyContent)\n    this.quillRef_body.setContents(JSON.parse(this.state.bodyContent)) //here\n    this.quillRef_title.setContents(JSON.parse(this.state.title))\n  }\n\n  handleBodyChange (content, delta, source, editor) {\n    this.state.bodyContent = JSON.stringify(editor.getContents()) //here\n  }\n  handleTitleChange (content, delta, source, editor) {\n    this.state.title = JSON.stringify(editor.getContents()) //here\n  }\n\n  // handleThemeChange (newTheme) {\n  //   if (newTheme === \"core\") newTheme = null;\n  //   this.setState({ theme: newTheme })\n  // }\n\n\n  render() {\n    return (\n      <div>\n        <ReactQuill\n          ref={(el) => { this.reactQuillRef_title = el }}\n          id=\"title\"\n          theme='bubble'\n          onChange={this.handleTitleChange}\n          modules={RichTextEditor.modules}\n          formats={RichTextEditor.formats}\n        />\n        <ReactQuill\n          ref={(el) => { this.reactQuillRef_body = el }}\n          theme={this.state.theme}\n          onChange={this.handleBodyChange}\n          modules={RichTextEditor.modules}\n          formats={RichTextEditor.formats}\n        />\n        {/* <div className=\"themeSwitcher\">\n          <label>Theme </label>\n          <select onChange={(e) => \n              this.handleThemeChange(e.target.value)}>\n            <option value=\"snow\">Snow</option>\n            <option value=\"bubble\">Bubble</option>\n            <option value=\"core\">Core</option>\n          </select>\n        </div> */}\n        <button id=\"save\" onClick={this.updateNote}>Save</button>\n       </div>\n     )\n  }\n}\n\n/* \n * Quill modules to attach to editor\n * See https://quilljs.com/docs/modules/ for complete options\n */\nRichTextEditor.modules = {\n  toolbar: [\n    [{ 'header': '1'}, {'header': '2'}, { 'font': [] }],\n    [{size: []}],\n    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n    [{'list': 'ordered'}, {'list': 'bullet'}, \n     {'indent': '-1'}, {'indent': '+1'}],\n    ['link', 'image', 'video'],\n    ['clean']\n    \n  ],\n  clipboard: {\n    // toggle to add extra line breaks when pasting HTML:\n    matchVisual: false,\n  }\n}\n\n/* \n * Quill editor formats\n * See https://quilljs.com/docs/formats/\n */\nRichTextEditor.formats = [\n  'header', 'font', 'size',\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\n  'list', 'bullet', 'indent',\n  'link', 'image', 'video'\n]\n\nexport default RichTextEditor;","import React from \"react\";\nimport { render } from \"react-dom\";\nimport ReactQuill, { Quill } from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport \"./styles.css\";\n\nconst CustomHeart = () => <div><span>&emsp;&emsp;&emsp;&emsp;&emsp;Save</span></div>;\n\nfunction insertHeart() {\n  const cursorPosition = this.quill.getSelection().index;\n  this.quill.insertText(cursorPosition, \"♥\");\n  this.quill.setSelection(cursorPosition + 1);\n}\n\n\nvar toolbarOptions = [\n  ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\n  ['blockquote', 'code-block'],\n\n  [{ 'header': 1 }, { 'header': 2 }],               // custom button values\n  [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n  [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\n  [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\n  [{ 'direction': 'rtl' }],                         // text direction\n\n  [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\n  [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n\n  [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\n  [{ 'font': [] }],\n  [{ 'align': [] }],\n\n  ['clean']                                         // remove formatting button\n];\n\n/*\n * Custom toolbar component including the custom heart button and dropdowns\n */\nconst CustomToolbar = () => (\n  <div id=\"toolbar\">\n    <select className=\"ql-font\">\n      <option value=\"arial\" selected>\n        Arial\n      </option>\n      <option value=\"comic-sans\">Comic Sans</option>\n      <option value=\"courier-new\">Courier New</option>\n      <option value=\"georgia\">Georgia</option>\n      <option value=\"helvetica\">Helvetica</option>\n      <option value=\"lucida\">Lucida</option>\n    </select>\n    <select className=\"ql-size\">\n      <option value=\"extra-small\">Small</option>\n      <option value=\"small\">Normal</option>\n      <option value=\"medium\" selected>\n        Large\n      </option>\n      <option value=\"large\">Huge</option>\n    </select>\n    <select className=\"ql-bold\" />\n    <select className=\"ql-align\" />\n    <select className=\"ql-color\" />\n    <select className=\"ql-background\" />\n    <button className=\"ql-clean\" />\n    <button className=\"ql-insertHeart\">\n      <CustomHeart />\n    </button>\n  </div>\n);\n\n// Add sizes to whitelist and register them\nconst Size = Quill.import(\"formats/size\");\nSize.whitelist = [\"extra-small\", \"small\", \"medium\", \"large\"];\nQuill.register(Size, true);\n\n// Add fonts to whitelist and register them\nconst Font = Quill.import(\"formats/font\");\nFont.whitelist = [\n  \"arial\",\n  \"comic-sans\",\n  \"courier-new\",\n  \"georgia\",\n  \"helvetica\",\n  \"lucida\"\n];\nQuill.register(Font, true);\n\n/*\n * Editor component with custom toolbar and content containers\n */\nclass Editor extends React.Component {\n  state = { editorHtml: \"\" };\n\n  handleChange = html => {\n    this.setState({ editorHtml: html });\n  };\n\n  static modules = {\n    toolbar: {\n      container: \"#toolbar\",\n      handlers: {\n        insertHeart: insertHeart\n      }\n    }\n    // toolbar: toolbarOptions\n  };\n\n  static formats = [\n    \"header\",\n    \"font\",\n    \"size\",\n    \"bold\",\n    \"italic\",\n    \"underline\",\n    \"strike\",\n    \"blockquote\",\n    \"list\",\n    \"bullet\",\n    \"indent\",\n    \"link\",\n    \"image\",\n    \"color\"\n  ];\n\n  render() {\n    return (\n      <div className=\"text-editor\">\n        <CustomToolbar />\n        <ReactQuill\n          value={this.state.editorHtml}\n          onChange={this.handleChange}\n          placeholder={this.props.placeholder}\n          modules={Editor.modules}\n          formats={Editor.formats}\n        />\n      </div>\n    );\n  }\n}\n\n// const App = () => (\n//   <div className=\"custom-toolbar-example\">\n//     <h3>Custom Toolbar with React Quill (Fully working)</h3>\n//     <Editor placeholder={\"Write something or insert a heart ♥\"} />\n//   </div>\n// );\n\n// render(<App />, document.getElementById(\"root\"));\n\nexport default Editor;\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AllNotes from \"./AllNotes\";\nimport NewNote from \"./NewNote\";\nimport EditNote from \"./EditNote\";\n// import EditorApp from \"./editor/App\"\n// import EditorComponent from \"./editor/editor/editor\"\nimport RichTextEditor from \"./ReactQuilComp\";\nimport Editor from \"./reactQuillComp_custom.js\"\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <nav\n          className=\"navbar App-header\"\n          role=\"navigation\"\n          aria-label=\"main navigation\"\n        >\n          <div className=\"navbar-brand\">\n            <Link to=\"/\" className=\"navbar-item\">\n              Trees\n            </Link>\n          </div>\n\n          <div className=\"navbar-end\">\n            <Link to=\"/\" className=\"navbar-item\">\n              All Notes\n            </Link>\n\n            {/* <Link to=\"/newnote\" className=\"navbar-item\"> */}\n            <Link to=\"/editorapp2\" className=\"navbar-item\">\n              New Note\n            </Link>\n          </div>\n        </nav>\n\n        <Route exact path=\"/\" component={AllNotes} />\n        <Route path=\"/newnote\" component={NewNote} />\n        {/* <Route path=\"note/:id\" component={RichTextEditor} /> */}\n        <Route path=\"/editorapp2\" component={RichTextEditor} />\n        <Route path=\"/editorapp\" component={Editor} />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Notifications from \"react-notify-toast\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <div>\n    <Notifications />\n    <App />\n  </div>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}